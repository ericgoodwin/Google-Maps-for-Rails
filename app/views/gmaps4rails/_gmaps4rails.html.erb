<% content_for :scripts do %>
  <script type="text/javascript" src='http://maps.google.com/maps/api/js?sensor=false&amp;libraries=geometry'></script>
  <script type="text/javascript" src='http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/src/infobox.js'></script>
  <script type="text/javascript" src='http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer/1.0/src/markerclusterer_compiled.js'></script>

<script type="text/javascript" charset="utf-8">
function gmaps4rails_init() {
  <% #true is passed here to trigger map initialization %>
  <%=raw options.to_gmaps4rails(true) %>
};

window.onload = gmaps4rails_init;
</script>
<% end %>

<div id="<%= options['map_options'].try(:[],'container_id').nil? ? "map_container" : options['map_options']['container_id'] %>"> 
  <div id="<%= options['map_options'].try(:[],'id').nil? ? "gmaps4rails_map" : options['map_options']['id'] %>"></div>
</div>

